<!-- templates/employees/salary_history.html -->

{% extends 'base.html' %}

{% block content %}
{%load filters %}
<h2>Salary History for {{ employee.first_name }} {{ employee.last_name }}</h2>
<a href="{% url 'employee_list' %}" class="btn btn-secondary mb-3">Back to Employee List</a>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Date</th>
            <th>Salary</th>
        </tr>
    </thead>
    <tbody>
        {% for record in salary_history %}
        <tr>
            <td>{{ record.date }}</td>
            <td>{{ record.salary }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<!--
<div>
    <h3>Salary Change Over Time</h3>
    <canvas id="salaryChart"></canvas>
</div>
-->
<div>
    <h3>Salary Change Over Time</h3>
    <img src="data:image/png;base64,{{ chart_img|img_to_base64 }}" alt="Salary Chart">
</div>
<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
<!-- <script id="salaryHistory" type="application/json"> -->
<!-- </script> -->
<!-- <script> -->
<!--     var ctx = document.getElementById('salaryChart').getContext('2d'); -->
<!--     var salaryHistory = JSON.parse(document.getElementById('salaryHistory').textContent); -->
<!--     console.log(salaryHistory); -->
<!--     var dates = salaryHistory.map(record => record.date); -->
<!--     var salaries = salaryHistory.map(record => parseInt(record.salary, 10)); -->
<!--     var salaryChart = new Chart(ctx, { -->
<!--         type: 'line', -->
<!--         data: { -->
<!--             labels: dates, -->
<!--             datasets: [{ -->
<!--                 label: 'Salary', -->
<!--                 data: salaries, -->
<!--                 borderColor: 'rgba(75, 192, 192, 1)', -->
<!--                 borderWidth: 1, -->
<!--                 fill: false -->
<!--             }] -->
<!--         }, -->
<!--         options: { -->
<!--             scales: { -->
<!--                 x: { -->
<!--                     type: 'time', -->
<!--                     time: { -->
<!--                         unit: 'month' -->
<!--                     } -->
<!--                 }, -->
<!--                 y: { -->
<!--                     beginAtZero: true -->
<!--                 } -->
<!--             } -->
<!--         } -->
<!--     }); -->
<!-- </script> -->
{% endblock %}

